<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Popularity Visualization</title>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body>
    <%- include('./includes/header') -%>
    <div>
        <br><br><br><br><br><br><br><br><br>
        <br><br><br><br><br><br><br><br><br>
    </div>
    <h2>Selected Category: <%= category %></h2>
    <div id="filters">
        <label for="year">Select Year:</label>
        <select id="year"></select>

        <label for="quarter">Select Quarter:</label>
        <select id="quarter"></select>

        <label for="language">Select Language:</label>
        <select id="language"></select>

        <label for="visualizationType">Select Visualization Type:</label>
        <select id="visualizationType">
            <option value="line">Line Chart</option>
            <option value="bar">Bar Chart</option>
            <option value="pie">Pie Chart</option>
            <option value="treemap">Treemap Chart </option>
            <!-- Add more options for different types of visualizations -->
        </select>
        <!-------------------------------------------------------------------------- -->
        <div id="show-all-years">
            <input type="checkbox" id="showAllYears" onchange="updateChart()">
            <label for="showAllYears">Show All Years</label>
        </div>
        <div id="=by-Quarter">
            <label for="byQuarter">By Quarter:</label>
            <input type="checkbox" id="byQuarter" onchange="updateChart()"/>   
        </div>
        <!-------------------------------------------------------------------------- -->
    </div>

    <div id="chart-container">
        <div id="line-chart-container" class="chart-container"></div>
        <div id="bar-chart-container" class="chart-container"></div>
        <div id="pie-chart-container" class="chart-container"></div>
        <div id="treemap-chart-container" class="chart-container"></div>
    </div>

    <div>
        <br><br><br><br><br><br>
    </div>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="assets/js/script-prime.js"></script>

    <script>
        async function loadData() {
            const yearsData = await d3.csv('assets/DATA/issues.csv');
            const quartersData = await d3.csv('assets/DATA/issues.csv');
            const languagesData = await d3.csv('assets/DATA/repos.csv');

            const uniqueYears = getUniqueValues(yearsData, 'year');
            const uniqueQuarters = getUniqueValues(quartersData, 'quarter');
            //const uniqueLanguages = getUniqueValues(languagesData, 'language');
            let uniqueLanguages;
            const selectedCategory = '<%= category %>';

            switch (selectedCategory) {
                case 'Web Development':
                    uniqueLanguages = ['JavaScript', 'HTML', 'CSS', 'Protocol Buffer', 'Groovy', 'TypeScript', 'Blade', 'Twig', 'Pug', 'Kotlin', 'Swift', 'Vue', 'Svelte', 
                    'Ruby', 'CoffeeScript', 'Jupyter Notebook', 'ASP', 'PHP', 'Hack'];
                    break;
                case 'Mobile App Development':
                    uniqueLanguages = ['Java', 'Swift', 'Kotlin', 'Python', 'Apex', 'Groovy', 'Protocol Buffer','ActionScript','Dart','C#','Xamarin','Objective-C++',
                    'Objective-C',];
                    break;
                case 'Systems Programming':
                    uniqueLanguages = ['Java', 'Swift', 'Rust','Cuda', 'LLVM','Verilog', 'Groff', 'AppleScript', 'GDScript','C','D','nesC','GCC Machine Description',
                    'C++','Assembly','UnrealScript','DCPU-16 ASM'];
                    break;
                case 'Scripting and Automation':
                    uniqueLanguages =['Java', 'Swift', 'Kotlin', 'Rust', 'Python', 'Tcl', 'KiCad', 'Modelica', 'AppleScript', 'JavaScript', 'JSON', 'Shell', 'PowerShell', 
                    'Makefile', 'AutoHotkey', 'Raku', 'Uno', 'Jsonnet', 'DIGITAL Command Language', 'Perl', 'Bash', 'Perl 6', 'Dockerfile', 'Thrift', 'VimL', 'Groovy'];
                    break;
                case 'Data Science and Analysis':
                    uniqueLanguages = ['JavaScript', 'HTML', 'CSS', 'Python', 'Modelica','R','MATLAB','SAS','SQLPL','TSQL','Clojure','Go','Jupyter Notebook','SQL','Julia'];
                    break;
                case 'General Purpose Programming':
                    uniqueLanguages = ['Java', 'Swift', 'Kotlin', 'Python', 'Standard ML', 'Ceylon', 'Protocol Buffer', 'JSON', 'Gherkin', 'D', 'Delphi', 'Haxe', 'VBA',
                    'NSIS', 'Scheme', 'Vala', 'BitBake', 'ApacheConf', 'PostScript', 'Nix', 'Crystal', 'Ada', 'F#', 'Elm', 'Less', 'SWIG', 'Common Workflow Language', 
                    'LabVIEW', 'Inno Setup', 'PureBasic', 'Visual Basic', 'APL', 'Swift', 'Brightscript', 'Visual Basic .NET', 'XSLT', 'Genshi', 'FreeMarker', 'Puppet', 
                    'SQF', 'IDL', 'API Blueprint', 'SaltStack', 'ZenScript', 'Eagle', 'Common Lisp', 'Eiffel', 'Haskell', 'QML', 'Pawn', 'Lua', 'Smalltalk', 'Lean', 'Ruby', 
                    'SourcePawn', 'C#', 'C++', 'Elixir', 'Xtend', 'OCaml', 'PHP', 'Jinja', 'Hack', 'Fortran', 'Reason', 'Racket', 'M', 'Logos', 'Nim', 'GDScript', 'Scala', 'DM',
                     'AppleScript', 'ooc', 'Tcl']
                    break;
                case 'Markup And Configuration':
                    uniqueLanguages = ['Java', 'Swift', 'Kotlin', 'YAML', 'JSON', 'HTML', 'XML', 'Nginx', 'CodeQL', 'Roff', 'Stylus', 'Nunjucks', 'Mustache', 'Markdown', 
                    'Pan', 'Gettext Catalog', 'Batchfile', 'Rich Text Format', 'TeX', 'CWeb', 'Protocol Buffer'];
                    break;
                case 'Miscellaneous and Specialized':
                    uniqueLanguages =['Java', 'Swift', 'Kotlin', 'Python', 'Vim Snippet', 'PLpgSQL', 'YARA', 'Stata', 'Emacs Lisp', 'Fortran', 'Mako', 'Mathematica', 
                    'ColdFusion', 'Cucumber', 'Coq', 'GLSL', 'Liquid', 'PureScript', 'Ada', 'Elm', 'F*', 'Component Pascal', 'Ren\'Py', 'Smarty', 'VHDL', 'WebAssembly', 
                    'RobotFramework', 'MoonScript', 'q', 'Game Maker Language', 'Pascal', 'PLSQL', 'CMake', 'OpenEdge ABL', 'Arduino', 'Vim script', 'Ragel in Ruby Host', 
                    'XQuery', 'OpenSCAD', 'SystemVerilog', 'Inform 7', 'Web Ontology Language (OWL)', 'Prolog', 'BlitzBasic', 'AutoIt', 'LiveScript', 'AGS Script', 'Lasso', 
                    'Perl6', 'M4', 'Factor', 'Awk', 'Starlark', 'xBase', 'POV-Ray SDL', 'mIRC Script', 'Erlang', 'GAP', 'Max', 'ABAP', 'HCL', 'Objective-J', '1C Enterprise', 
                    'Forth', 'Slash', 'KiCad', 'Standard ML', 'Apex', 'LLVM'];
                    break;
                
                default:
                    uniqueLanguages = ['Default Language'];
            }

            populateDropdown('year', uniqueYears);
            populateDropdown('quarter', uniqueQuarters);
            populateDropdown('language', uniqueLanguages);


            const allLanguages = getUniqueValues(languagesData, 'language');
            console.log(allLanguages)
        }
        window.onload = loadData;
    </script>
</body>
</html>